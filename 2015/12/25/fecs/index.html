<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="前端开发者, 擅长各项前端技能，深入研究移动端开发与前端性能, 对 Nodejs 后端开发略有涉及。此为博客一枚.">
    <meta name="keyword"  content="前端 前端工程师 HTML5 CSS3 Javascript Node.js">
    <meta name="author"  content="sqrtthree | 根号三">
    <meta name="email"  content="sqrtthree@foxmail.com | imsqrtthree@gmail.com">
		<title>
      
        前端代码风格检查套件 FECS - 根号三
      
    </title>
    <link rel="shortcut icon" href="https://assets-cdn.github.com/favicon.ico">
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdn.staticfile.org/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/dist/styles/index.css">
  </head>
  <body>
    <nav class="navbar navbar-light navbar-fixed-top navbar-custom">
  <div class="clearfix">
    <button class="navbar-toggler pull-right hidden-sm-up" type="button" data-toggle="collapse" data-target="#main-nav">&#9776;</button>
    <a class="navbar-brand hidden-sm-up" href="/">根号三</a>
  </div>
  <div id="main-nav" class="collapse navbar-toggleable-xs in">
    <a class="navbar-brand hidden-sm-down" href="/">根号三</a>
    <ul class="nav navbar-nav navbar-right text-uppercase hidden-sm-down">
      
        
            
            <li class="nav-item">
              <a class="nav-link" href="/about/">about</a>
            </li>
            
        
            
            <li class="nav-item">
              <a class="nav-link" href="/categories/">categories</a>
            </li>
            
        
            
            <li class="nav-item">
              <a class="nav-link" href="/tags/">Tags</a>
            </li>
            
        
      
      
        
            <li class="nav-item">
              <a class="nav-link" href="/rss.xml">RSS</a>
            </li>
        
      
    </ul>
  </div>
</nav>

    
  <header class="intro-header">

  <div class="container">
    <div class="row">
      <div class="col-md-10 col-md-offset-1">
        
          <div class="post-heading">
              <div class="tags ghost-tags">
                
              </div>
              <h1>前端代码风格检查套件 FECS</h1>
              
              <span class="meta">Posted by sqrtthree on Dec 25, 2015</span>
          </div>
        
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container">
    <div class="row">
      
        <div id="markdown-container" class="col-md-10 col-md-offset-1">
          <div class="markdown-body">
            <blockquote>
<p>All code in any code-base should look like a single person typed it, no matter how many people contributed. — idiomatic.js<br>在任一个代码库中，不管是多少人协同开发，所有的代码都应该看起来像是一个人写的。- idiomatic.js</p>
</blockquote>
<p>This means strictly enforcing these agreed upon guidelines at all times.</p>
<a id="more"></a>
<p>今天要讲的不是代码规范，关于代码规范网上已经有了非常好的实践和各大公司公开的实践指南，大家可自行查询。 例如: <a href="http://zoomzhao.github.io/code-guide/" target="_blank" rel="external">code-guide chinese</a>.</p>
<p>然而，有了规范是一回事，执行起来又是一回事。今天要介绍的就是一款按照指定风格检测代码是否符合规范的工具，通过工具的自动检测，以确保每一行代码都符合规范。</p>
<h2 id="FECS-是什么？"><a href="#FECS-是什么？" class="headerlink" title="FECS 是什么？"></a>FECS 是什么？</h2><p><a href="http://fecs.baidu.com/" target="_blank" rel="external">fecs</a> 是以百度前端代码规范为目标的基于 Node.js 的前端代码风格检测工具，套件内包括了 <code>htmlcs、csshint、lesslint</code> 和 <code>jformatter</code> 等工具。</p>
<p>因此，<code>fecs</code> 不仅能检查 <code>HTML/CSS/LESS/JavaScript</code> 代码的规范问题，而且还能修复代码的规范问题。</p>
<h2 id="FECS-能干什么？"><a href="#FECS-能干什么？" class="headerlink" title="FECS 能干什么？"></a>FECS 能干什么？</h2><h3 id="fecs-check"><a href="#fecs-check" class="headerlink" title="fecs check"></a>fecs check</h3><p>首先，主要功能就是代码格式的检查，当然了呢，因为是最初是供于百度内部使用的工具，自然就是以 <a href="https://github.com/ecomfe/spec/" target="_blank" rel="external">百度前端代码规范</a> 为首要目标，好在该规范第一开源，第二还不错，因此可以直接使用。</p>
<p>当然了，如果你不喜欢其中的某些规则，<code>FECS</code> 也是支持配置文件设置规则的方式的，具体的在下文说明。</p>
<p>需要说明的是，<code>FECS</code> 目前只支持 <code>HTML/CSS/LESS/JavaScript</code> 四种文件和语法的检测。</p>
<h4 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h4><p><code>Javascript</code> 方面 <code>FECS</code> 采用了 <code>eslint</code> 检测引擎，因此你在自定义规则的时候可以参考 <a href="http://esling.org/" target="_blank" rel="external">esling</a> 的文档进行相关配置。<code>FECS</code> 只是在 <code>eslint</code> 基础之上针对百度的代码规范作了新的规则实现或调整。详细内容见 <a href="https://github.com/ecomfe/fecs/wiki/FECSRules" target="_blank" rel="external">FECS 自有规则</a></p>
<h4 id="CSS-LESS-HTML"><a href="#CSS-LESS-HTML" class="headerlink" title="CSS/LESS/HTML"></a>CSS/LESS/HTML</h4><p>CSS 的 linter 是使用了内部优化过的 <code>csshint</code>。LESS 和 HTML 方面则分别使用了 <code>lesslint</code> 和 <code>htmlcs</code>。</p>
<h2 id="FECS-的安装及其使用"><a href="#FECS-的安装及其使用" class="headerlink" title="FECS 的安装及其使用"></a>FECS 的安装及其使用</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>安装 <code>FECS</code> 需要依赖 <code>node</code> <code>npm</code> 环境支持，执行以下命令即可安装:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> [sudo] npm install fecs -g</span></div></pre></td></tr></table></figure>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>使用方式可使用以下命令查看:</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ fecs --help</div><div class="line">$ fecs<span class="built_in"> check </span>--help</div><div class="line">$ fecs format --help</div></pre></td></tr></table></figure>
<p>具体的命令参数？哎呀，官方已经写的够详细的了，还是看官方文档吧: <a href="https://github.com/ecomfe/fecs/wiki/CLI" target="_blank" rel="external">FECS 命令参数</a></p>
<h2 id="自定义配置"><a href="#自定义配置" class="headerlink" title="自定义配置"></a>自定义配置</h2><p><code>FECS</code> 支持通过配置文件的方式指定特定的规则。</p>
<p>配置文件的支持来自 <code>manis</code>，支持使用 <code>.fecsrc</code> 或 <code>package.json</code>，但以第一个找到的为准。配置文件 <code>.fecsrc</code> 大体是这个样子的:</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"files"</span>: [],</div><div class="line"></div><div class="line">    <span class="string">"eslint"</span>: <span class="meta">&#123;...&#125;</span>,</div><div class="line"></div><div class="line">    <span class="string">"csshint"</span>: <span class="meta">&#123;...&#125;</span>,</div><div class="line"></div><div class="line">    <span class="string">"htmlcs"</span>: <span class="meta">&#123;...&#125;</span>,</div><div class="line"></div><div class="line">    <span class="string">"csscomb"</span>: <span class="meta">&#123;...&#125;</span></div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>比如说他们的<a href="https://github.com/ecomfe/spec/blob/master/javascript-style-guide.md" target="_blank" rel="external">JavaScript编码规范</a> 中关于换行中有这样一条 <a href="https://github.com/ecomfe/spec/blob/master/javascript-style-guide.md#建议-对于-ifelsetrycatchfinally-等语句推荐使用在--号后添加一个换行-的风格使代码层次结构更清晰阅读性更好" target="_blank" rel="external">对于if…else…try…catch…finally 等语句，推荐使用在 } 号后添加一个换行的风格，使代码层次结构更清晰，阅读性更好</a>，这一条我就很不喜欢嘛，那我可以这样配置:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"eslint"</span>: &#123;</div><div class="line">        <span class="attr">"rules"</span>: &#123;</div><div class="line">            <span class="attr">"brace-style"</span>: [<span class="number">2</span>, <span class="string">"1tbs"</span>, &#123;&#125;]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样配置之后再进行检测，就能愉快的按照下面这种写法愉快的 coding 了。</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="keyword">condition</span>) &#123;</div><div class="line">    <span class="comment">// some statements;</span></div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// some statements;</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="多工具支持"><a href="#多工具支持" class="headerlink" title="多工具支持"></a>多工具支持</h2><p>详情支持列表请参考官方文档 <a href="https://github.com/ecomfe/fecs#工具支持" target="_blank" rel="external">工具支持</a>。</p>
<p>嗯。文档依旧写的很完善，基本上已经没什么好补充的了。</p>
<p>在这里我有一个小提示，就是工具对 <code>atom</code> 编辑器的支持相对于对 <code>sublime</code> 的支持来说要优秀很多， 包括检测速度呀，错误提示呀，<code>atom</code> 都略称一筹，这取决于 <code>atom</code> 优秀的插件机制。并且我在 <code>sublime</code>下面使用的时候发现了一个 bug，就是错误提示会显示为特殊编码导致无法以中文显示。解决方案呢，在这里<a href="https://github.com/leeight/Baidu-FE-Code-Style/issues/6" target="_blank" rel="external">https://github.com/leeight/Baidu-FE-Code-Style/issues/6</a>，不过感觉略麻烦的样子。</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h2><p><code>FECS</code> 的错误报告默认为英文格式，由各 linter 直接提供。<code>FECS</code> 根据百度前端代码规范，作了一次影射转换，通过指定 reporter 为 baidu 可以看到中文的报告输出效果，对于某些比较抽象的描述，会同时在括号内提供英文原文补充说明。</p>
<p>例如，你可以这样用:</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fecs<span class="built_in"> check </span>--reporter=baidu</div></pre></td></tr></table></figure>
<p>或者，更直接一点，直接添加一个 <code>alias</code>，使其在执行 <code>fecs check</code> 命令时默认为中文输出。</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">alias</span> fecs=<span class="symbol">'fecs</span> <span class="comment">--reporter=baidu'</span></div></pre></td></tr></table></figure>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接:"></a>相关链接:</h2><ul>
<li><a href="http://fecs.baidu.com/" target="_blank" rel="external">FECS 官网</a></li>
<li><a href="http://github.com/ecomfe/fecs/wiki" target="_blank" rel="external">FECS WIKI</a></li>
<li><a href="http://github.com/ecomfe/fecs" target="_blank" rel="external">FECS Github</a></li>
</ul>

          </div>
          
            
              <div id="donation">
  <h2>您的鼓励是作者写作最大的动力</h2>
  <p>如果您认为本网站的文章质量不错，读后觉得收获很大，不妨请我喝杯咖啡，让我有动力继续写出高质量的文章。: )</p>
  
    <a href="http://7xl8me.com1.z0.glb.clouddn.com/alipay.JPG" class="btn btn-primary" target="_blank">支付宝打赏</a>
  
  
    <a href="http://7xl8me.com1.z0.glb.clouddn.com/wechat_receive_money.JPG" class="btn btn-success" target="_blank">微信打赏</a>
  
</div>

            
          
          
  <div class="social-share" style="margin-top: 1em;"></div>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


          
  <hr>
  <ul class="pager">
    <li class="pager-prevnull">
      
        <a href="/2015/12/26/javascript-developer-survey-results/" data-toggle="tooltip" data-placement="top" title="JavaScript 开发者年度调查报告">
          Previous<br>
          <span>JavaScript 开发者年度调查报告</span>
        </a>
      
    </li>
    <li class="pager-next">
      
        <a href="/2015/11/12/jQuery3-0-Alpha-Versions-Released/" data-toggle="tooltip" data-placement="top" title="jQuery 3.0 以及兼容版的 Alpha 版本发布">
          Next<br>
          <span>jQuery 3.0 以及兼容版的 Alpha 版本发布</span>
        </a>
      

    </li>
</ul>

          
  
    <!-- 网易云跟帖 start -->
    <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
      <script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script>
      <script>
      var cloudTieConfig = {
        url: document.location.href,
        sourceId: "",
        productKey: "c3543b8fa8f94d3c88ec9b8a1e9e6758",
        target: "cloud-tie-wrapper"
      };
      var yunManualLoad = true;
      Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);
      </script>
    <!-- 网易云跟帖 end -->
  


        </div>
      
    </div>
  </div>
</article>


    <footer id="footer">
  <div class="container">
    <div class="row">
      <ul>
        <li class="col-md-3">
          <h2>友情链接</h2>
          
            <div><a href="https://github.com/sqrthree" target="_blank">GitHub</a></div>
          
            <div><a href="https://zhuanlan.zhihu.com/FETalk" target="_blank">FETalk</a></div>
          
            <div><a href="http://blog.sqrtthree.com/rss.xml" target="_blank">RSS</a></div>
          
        </li>
        <li class="col-md-3">
          <h2>GitHub</h2>
          
            <div><a target="_blank " href="https://github.com/sqrthree">GitHub</a></div>
          
            <div><a target="_blank " href="https://github.com/sqrthree/sqrthree.github.io">sqrthree.github.io</a></div>
          
            <div><a target="_blank " href="https://github.com/sqrthree/awesome-npm-packages">awesome-npm-packages</a></div>
          
            <div><a target="_blank " href="https://github.com/sqrthree/gitmit">gitmit</a></div>
          
        </li>
        <li class="col-md-3">
          <h2>联系方式</h2>
          
            <div><a href="javascript:;">QQ</a> - 511249910</div>
          
            <div><a href="javascript:;">E-mail</a> - imsqrtthree@gmail.com</div>
          
        </li>
        <li class="col-md-3">
          <h2>内容许可</h2>
          <div>除特别说明外，用户内容均采用 <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" target="_blank">署名-非商业性使用-禁止演绎 4.0 国际 (CC BY-NC-ND 4.0)</a> 进行许可。</div>
        </li>
      </ul>
    </div>
    <p class="text-md-right">
      <strong>©2016 <a href="https://github.com/sqrthree" target="_blank">根号三</a></strong>
      <strong>Theme by <a href="http://huangxuan.me/" target="_blank">Hux</a></strong>
      <strong>Power by <a href="https://hexo.io/" target="_blank">Hexo</a></strong>
    </p>
  </div>
</footer>

    <script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
    <script type="text/javascript" src="/dist/js/index.min.js"></script>
    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64863915-1', 'auto');
  ga('send', 'pageview');

</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?be6e4b8e6af93860f98b001aab5cbe79";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


  </body>
</html>
